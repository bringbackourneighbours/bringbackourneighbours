---
import BaseLayout from '../layouts/BaseLayout.astro';
import CardLink from '../design/CardLink.astro';
import { useUiTranslation } from '../util/use-ui-translation';
import { getCanonicalUrlToFlyer } from '../util/get-canonical-url-to-flyer';
import { Languages, RTL_LANGUAGES } from '../util/languages.enum';

const allLanguages = Object.values(Languages); // FIXME: my IDE is not resolving this... why?
---

<BaseLayout
  lang="de"
  title=`${await useUiTranslation('meta.title', 'de')} | ${await useUiTranslation('meta.subtitle', 'de')}`
  classes="wide"
>
  {
    allLanguages.map(async (lang) => (
      <CardLink
        direction={RTL_LANGUAGES.includes(lang) ? 'rtl' : 'ltr'}
        href={await getCanonicalUrlToFlyer(lang, 'detention')}
        lang={lang}
      >
        {
          //FIXME: When using await here it will break... but why?
          useUiTranslation('wizard.isThereDangerQuestion', lang)
        }
      </CardLink>
    ))
  }
</BaseLayout>
