---
import { getCollection, type CollectionEntry } from 'astro:content';
import { getCanonicalUrlToFlyer } from '../../../../util/get-canonical-url-to-flyer';

interface Props {
  entry: CollectionEntry<'flyers'>;
}

export async function getStaticPaths() {
  const flyerEntries = await getCollection('flyers');
  return flyerEntries.map((entry: CollectionEntry<'flyers'>) => {
    return {
      params: {
        lang: entry.data.lang,
        identifier: entry.data.identifier,
      },
      props: { entry },
    };
  });
}

const url = await getCanonicalUrlToFlyer(
  Astro.props.entry.data.lang,
  Astro.props.entry.data.identifier,
);

return Astro.redirect(url);
---
