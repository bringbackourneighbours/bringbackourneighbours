---
import { getFlatLinksEntries } from '../../util/get-flat-links-entries';

interface Props {
  slug: string;
}

export async function getStaticPaths() {
  const entries = await getFlatLinksEntries();
  return entries.map(({ slug }) => ({
    params: { slug },
    props: { slug },
  }));
}

return Astro.redirect(
  (await getFlatLinksEntries()).find((entry) => {
    return entry.slug === Astro.props.slug;
  })?.url,
  307,
);
---
